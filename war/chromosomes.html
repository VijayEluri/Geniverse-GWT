<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- The HTML 4.01 Transitional DOCTYPE declaration-->
<!-- above set at the top of the file will set     -->
<!-- the browser's rendering engine into           -->
<!-- "Quirks Mode". Replacing this declaration     -->
<!-- with a "Standards Mode" doctype is supported, -->
<!-- but may lead to some differences in layout.   -->

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <!--                                                               -->
    <!-- Consider inlining CSS to reduce the number of requested files -->
    <!--                                                               -->
    <link type="text/css" rel="stylesheet" href="/geniverse/Geniverse.css">

    <!--                                           -->
    <!-- Any title is fine                         -->
    <!--                                           -->
    <title>Web Application Starter Project</title>
    
    <!--                                           -->
    <!-- This script loads your compiled module.   -->
    <!-- If you add any GWT meta tags, they must   -->
    <!-- be added before this line.                -->
    <!--                                           -->
    <script type="text/javascript" language="javascript" src="/geniverse/geniverse/geniverse.nocache.js"></script>
    <script src='http://geniverse.dev.concord.org/demo/jquery-1.4.js'></script>
    <script type="text/javascript" language="javascript">
    	function generate(){
    		generateDragon()
    	}
    	
    	function generate2(){
    		generateDragonWithAlleleString(1, "a:h,b:h")
    	}
    	
    	function getDragon() {
    	  	document.getElementById("dragon_info").innerHTML = "Getting info..."
	    	  var onSuccess = function(organism) {
	    	      document.getElementById("dragon_info").innerHTML = "Alleles: " + organism.alleles;
				parse(organism.alleles)
	    	    };
	    	  var onFailure = function(throwable) {
	    	      document.getElementById("dragon_info").innerHTML = "Error getting dragon: " + throwable;
	    	    };
	    	  generateDragonWithCallback(onSuccess, onFailure);
    	}
    </script>
	<script type="text/javascript" language="javascript">
		// jQuery functions
		$(document).ready(function(){
			$('#sendButtonContainer').hide();	// hide required GWT button
			
		});
		
		function parse(alleles){
			parseAndSelect(alleles, /a:[Hh]/, "sel-a-horns")
			parseAndSelect(alleles, /b:[Hh]/, "sel-b-horns")
			parseAndSelect(alleles, /a:[Ss]/, "sel-a-scales")
			parseAndSelect(alleles, /b:[Ss]/, "sel-b-scales")
			parseAndSelect(alleles, /a:[Ww]/, "sel-a-wings")
			parseAndSelect(alleles, /b:[Ww]/, "sel-b-wings")
			parseAndSelect(alleles, /a:[Ll]/, "sel-a-legs")
			parseAndSelect(alleles, /b:[Ll]/, "sel-b-legs")
			parseAndSelect(alleles, /a:[Tt]/, "sel-a-tail")
			parseAndSelect(alleles, /b:[Tt]/, "sel-b-tail")
		}
		
		function parseAndSelect(alleles, pattern, id){
			var val = alleles.match(pattern)[0].slice(-1)
			$("#"+id+" option[value='"+val+"']").attr('selected', 'selected');
		}
	</script>
  </head>

  <!--                                           -->
  <!-- The body can have arbitrary html, or      -->
  <!-- you can leave the body empty if you want  -->
  <!-- to create a completely dynamic UI.        -->
  <!--                                           -->
  <body>

    <!-- OPTIONAL: include this if you want history support -->
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>

    <h1>Static Chromosome Example</h1>
	
    <table align="center">
      	<tr>
        	<td id="sendButtonContainer"></td>	<!-- It seems that this must exit for this to function. It is being hidden by the script -->
      	</tr>
   	</table>
    <div style="text-align: center;">
    	Script button: <b> <a href="javascript:getDragon();">get dragon</a> </b>
    	<div id="dragon_info" />
    </div>
<p>
	Horns:
	a:
	<select id="sel-a-horns">
	  <option></option>
	  <option value="H">H</option>
	  <option value="h">h</option>
	</select>
	b:
	<select id="sel-b-horns">
	  <option></option>
	  <option value="H">H</option>
	  <option value="h">h</option>
	</select>
</p>
<p>
	Scales:
	a:
	<select id="sel-a-scales">
	  <option></option>
	  <option value="S">S</option>
	  <option value="s">s</option>
	</select>
	b:
	<select id="sel-b-scales">
	  <option></option>
	  <option value="S">S</option>
	  <option value="s">s</option>
	</select>
</p>
<p>
	Wings:
	a:
	<select id="sel-a-wings">
	  <option></option>
	  <option value="W">W</option>
	  <option value="w">w</option>
	</select>
	b:
	<select id="sel-b-wings">
	  <option></option>
	  <option value="W">W</option>
	  <option value="w">w</option>
	</select>
</p>
<p>
	Legs:
	a:
	<select id="sel-a-legs">
	  <option></option>
	  <option value="L">L</option>
	  <option value="l">l</option>
	</select>
	b:
	<select id="sel-b-legs">
	  <option></option>
      <option value="L">L</option>
	  <option value="l">l</option>
	</select>
</p>
<p>
	Tail:
	a:
	<select id="sel-a-tail">
	  <option></option>
	  <option value="T">T</option>
	  <option value="t">t</option>
	</select>
	b:
	<select id="sel-b-tail">
	  <option></option>
	  <option value="T">T</option>
	  <option value="t">t</option>
	</select>
</p>
  </body>
</html>
